diff --git a/jsfx/jsfx_api.cpp b/jsfx/jsfx_api.cpp
index 36f7a4d2..a98f4f33 100644
--- a/jsfx/jsfx_api.cpp
+++ b/jsfx/jsfx_api.cpp
@@ -16,13 +16,14 @@ const char *g_config_slider_classname = "REAPERhfader";
 
 HINSTANCE g_hInst;
 
-extern "C" {
-
-#ifdef _WIN32
-__declspec(dllexport) jsfxAPI JesusonicAPI=
-#else
-__attribute__((visibility("default"))) jsfxAPI JesusonicAPI=
-#endif
+// extern "C" {
+
+// #ifdef _WIN32
+// __declspec(dllexport) jsfxAPI JesusonicAPI=
+// #else
+// __attribute__((visibility("default"))) jsfxAPI JesusonicAPI=
+// #endif
+jsfxAPI JesusonicAPI =
 {
   JSFX_API_VERSION_CURRENT,
 
@@ -70,16 +71,16 @@ __attribute__((visibility("default"))) jsfxAPI JesusonicAPI=
 };
 
 
-BOOL WINAPI DllMain(HINSTANCE hDllInst, DWORD fdwReason, LPVOID res)
-{
-  if (fdwReason==DLL_PROCESS_ATTACH)
-  {
-    g_hInst=hDllInst;
-  }
-  return TRUE;
-}
+// BOOL WINAPI DllMain(HINSTANCE hDllInst, DWORD fdwReason, LPVOID res)
+// {
+//   if (fdwReason==DLL_PROCESS_ATTACH)
+//   {
+//     g_hInst=hDllInst;
+//   }
+//   return TRUE;
+// }
 
-};
+// };
 
 extern int g_last_srate;
 
diff --git a/jsfx/jsfx_api.h b/jsfx/jsfx_api.h
index 349eaf42..8a4154bb 100644
--- a/jsfx/jsfx_api.h
+++ b/jsfx/jsfx_api.h
@@ -18,7 +18,9 @@
 
 // to get the API struct, GetProcAddress("JesusonicAPI")
 
-#ifndef _WIN32
+#ifdef _WIN32
+#include <windows.h>
+#else
 #include "../WDL/swell/swell.h"
 #endif
 
diff --git a/jsfx/res.rc b/jsfx/res.rc
index a3a2810d..5366ea5a 100644
--- a/jsfx/res.rc
+++ b/jsfx/res.rc
@@ -7,7 +7,11 @@
 //
 // Generated from the TEXTINCLUDE 2 resource.
 //
-#include "afxres.h"
+#ifndef _WIN32
+#include "../WDL/swell/swell-dlggen.h"
+#else
+#include <windows.h>
+#endif
 
 /////////////////////////////////////////////////////////////////////////////
 #undef APSTUDIO_READONLY_SYMBOLS
@@ -27,7 +31,8 @@ LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US
 //
 
 IDD_SXUI DIALOG DISCARDABLE  0, 0, 326, 278
-STYLE DS_CONTROL | WS_CHILD
+STYLE DS_SETFONT | DS_MODALFRAME | WS_POPUP | WS_CAPTION | WS_SYSMENU
+CAPTION "JSFX UI"
 FONT 8, "MS Shell Dlg"
 BEGIN
     COMBOBOX        IDC_COMBO1,19,1,175,145,CBS_DROPDOWNLIST | WS_VSCROLL | 
diff --git a/jsfx/sfxui.cpp b/jsfx/sfxui.cpp
index a6667b3f..dd7e5f97 100644
--- a/jsfx/sfxui.cpp
+++ b/jsfx/sfxui.cpp
@@ -693,7 +693,19 @@ void SX_Instance::DoInitDialog(HWND hwndDlg)
 
   SendMessage(hwndDlg, WM_USER+4400, 0, 0);
 
-  SetWindowPos(hwndDlg,NULL,0,0,ow,r.bottom,SWP_NOMOVE|SWP_NOACTIVATE|SWP_NOZORDER);
+  // Adjust for window decorations (title bar, borders) when using WS_CAPTION
+  DWORD style = GetWindowLong(hwndDlg, GWL_STYLE);
+  if (style & WS_CAPTION)
+  {
+    RECT clientRect = {0, 0, ow, r.bottom};
+    DWORD exStyle = GetWindowLong(hwndDlg, GWL_EXSTYLE);
+    AdjustWindowRectEx(&clientRect, style, FALSE, exStyle);
+    SetWindowPos(hwndDlg,NULL,0,0,clientRect.right - clientRect.left, clientRect.bottom - clientRect.top,SWP_NOMOVE|SWP_NOACTIVATE|SWP_NOZORDER);
+  }
+  else
+  {
+    SetWindowPos(hwndDlg,NULL,0,0,ow,r.bottom,SWP_NOMOVE|SWP_NOACTIVATE|SWP_NOZORDER);
+  }
 }
 
 void SX_Instance::DoUpdate(HWND hwndDlg)
@@ -1470,6 +1482,19 @@ WDL_DLGRET SX_Instance::ConfigDlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LP
 
   switch (uMsg)
   {
+    case WM_CLOSE:
+      // Handle window close button (X)
+      DestroyWindow(hwndDlg);
+      return 0;
+
+    case WM_SYSCOMMAND:
+      if (wParam == SC_CLOSE)
+      {
+        DestroyWindow(hwndDlg);
+        return 0;
+      }
+      break;
+
     case WM_INITDIALOG:
       {
         m_hwnd=hwndDlg;
